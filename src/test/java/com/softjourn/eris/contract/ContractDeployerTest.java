package com.softjourn.eris.contract;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.softjourn.eris.ErisAccountData;
import com.softjourn.eris.contract.response.DeployResponse;
import com.softjourn.eris.contract.types.Address;
import com.softjourn.eris.contract.types.Array;
import com.softjourn.eris.contract.types.Bool;
import com.softjourn.eris.contract.types.Uint;
import com.softjourn.eris.rpc.ErisRPCRequestEntity;
import com.softjourn.eris.rpc.HTTPRPCClient;
import com.softjourn.eris.rpc.RPCClient;
import org.junit.Before;
import org.junit.Test;
import org.mockito.Mockito;

import java.io.IOException;
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;
import static org.mockito.Matchers.any;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

public class ContractDeployerTest {

    ContractDeployer deployer;
    ErisAccountData account;

    RPCClient client;
    RPCClient client2;

    private ContractUnit unit;

    private String solidityByteCode = "60606040526000600960006101000a81548160ff021916908302179055506000600960016101000a81548160ff0219169083021790555060405161132f38038061132f833981016040528080519060200190919080519060200190919080519060200190919080519060200190919080518201919060200150505b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555084600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555083600260005081905550603c8302420160046000508190555081600560006101000a81548160ff0219169083021790555061010a8161011f565b505b5050505050611049806102e66000396000f35b600060006000600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141580156101d15750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614155b156101df57600092506102df565b600091505b83518210156102d757838281518110156100025790602001906020020151905060066000508054806001018281815481835581811511610256578183600052602060002091820191016102559190610237565b808211156102515760008181506000905550600101610237565b5090565b5b5050509190906000526020600020900160005b83909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690830217905550506000600860005060008373ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000508190555081806001019250506101e4565b8192506102df565b505091905056606060405236156100cc576000357c01000000000000000000000000000000000000000000000000000000009004806301cb3b20146100ce57806302d05d3f146100f157806329dcb0cf1461012a57806338af3eed1461014d5780633962f82d146101865780637a2d5add146101a95780637a3a0e84146101d55780637b3e5e7b146101f85780638f4ffcb11461021b578063a0e2e5f6146102a0578063c5064cb0146102cc578063e4e0ef35146102ef578063f7888aec14610331578063fd6b7ef814610366576100cc565b005b6100db6004805050610850565b6040518082815260200191505060405180910390f35b6100fe60048050506103af565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61013760048050506103e7565b6040518082815260200191505060405180910390f35b61015a6004805050610389565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610193600480505061048b565b6040518082815260200191505060405180910390f35b6101bf60048080359060200190919050506104a0565b6040518082815260200191505060405180910390f35b6101e260048050506103d5565b6040518082815260200191505060405180910390f35b61020560048050506103de565b6040518082815260200191505060405180910390f35b61028a6004808035906020019091908035906020019091908035906020019091908035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061056b565b6040518082815260200191505060405180910390f35b6102b66004808035906020019091905050610470565b6040518082815260200191505060405180910390f35b6102d960048050506103f0565b6040518082815260200191505060405180910390f35b6103056004808035906020019091905050610403565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6103506004808035906020019091908035906020019091905050610445565b6040518082815260200191505060405180910390f35b6103736004805050610963565b6040518082815260200191505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60026000505481565b60036000505481565b60046000505481565b600560009054906101000a900460ff1681565b600660005081815481101561000257906000526020600020900160005b9150909054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6007600050602052816000526040600020600050602052806000526040600020600091509150505481565b60086000506020528060005260406000206000915090505481565b6000600660005080549050905061049d565b90565b60006000600960019054906101000a900460ff16156104c25760009150610565565b600090505b60066000508054905081101561055c57600660005081815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561054f5760019150610565565b80806001019150506104c7565b60009150610565565b50919050565b60006000610578846104a0565b15156105875760009150610847565b3090508373ffffffffffffffffffffffffffffffffffffffff166323b872dd878388604051847c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200193505050506020604051808303816000876161da5a03f115610002575050506040518051906020015015156106485760009150610847565b6000600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054141561070d5784600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005081905550610774565b84600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055505b84600860005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055508460036000828282505401925050819055507f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c8685876001604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a160019150610847565b50949350505050565b6000600460005054421015806108725750600560009054906101000a900460ff165b1561094957600260005054600360005054101515610920576001600960006101000a81548160ff021916908302179055507fec3f991caf7857d61663fd1bba1739e04abd4781238508cde554bb849d790c85600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600360005054604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a15b60046000505442101515610948576001600960016101000a81548160ff021916908302179055505b5b600960019054906101000a900460ff169050610960565b90565b60006000600060006000610975610850565b15156109845760009450611042565b600960009054906101000a900460ff161515610ce1576000935083505b600660005080549050841015610cd857600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015610a8857506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000505414155b15610ccb57600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055506000821115610cca578273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb3384604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001925050506020604051808303816000876161da5a03f115610002575050506040518051906020015015610c6a577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c3384846000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a1610cc9565b81600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055505b5b5b83806001019450506109a1565b60019450611042565b600960009054906101000a900460ff168015610d4a57503373ffffffffffffffffffffffffffffffffffffffff16600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1561103957600190506000935083505b60066000508054905084101561103057600073ffffffffffffffffffffffffffffffffffffffff16600660005085815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561102357600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600860005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081508273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001925050506020604051808303816000876161da5a03f11561000257505050604051805190602001501561101d577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600660005086815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff166003600050546000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a1600860005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060009055611022565b610002565b5b8380600101945050610d5a565b60019450611042565b60009450611042565b505050509056";

    private String deploySuccessResult = "{\"result\":{\"call_data\":{\"caller\":\"64D84C8BF6305C7F396C57ECB3DB18B8F51623F3\",\"callee\":\"AC4DEF50803F1C118E962CD4EFFEAE0E356A708D\",\"data\":\"60606040526000600960006101000A81548160FF021916908302179055506000600960016101000A81548160FF0219169083021790555060405161132F38038061132F833981016040528080519060200190919080519060200190919080519060200190919080519060200190919080518201919060200150505B33600160006101000A81548173FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0219169083021790555084600060006101000A81548173FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0219169083021790555083600260005081905550603C8302420160046000508190555081600560006101000A81548160FF0219169083021790555061010A8161011F565B505B5050505050611049806102E66000396000F35B600060006000600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF163373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16141580156101D15750600160009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF163373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1614155B156101DF57600092506102DF565B600091505B83518210156102D757838281518110156100025790602001906020020151905060066000508054806001018281815481835581811511610256578183600052602060002091820191016102559190610237565B808211156102515760008181506000905550600101610237565B5090565B5B5050509190906000526020600020900160005B83909190916101000A81548173FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF02191690830217905550506000600860005060008373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000508190555081806001019250506101E4565B8192506102DF565B505091905056606060405236156100CC576000357C01000000000000000000000000000000000000000000000000000000009004806301CB3B20146100CE57806302D05D3F146100F157806329DCB0CF1461012A57806338AF3EED1461014D5780633962F82D146101865780637A2D5ADD146101A95780637A3A0E84146101D55780637B3E5E7B146101F85780638F4FFCB11461021B578063A0E2E5F6146102A0578063C5064CB0146102CC578063E4E0EF35146102EF578063F7888AEC14610331578063FD6B7EF814610366576100CC565B005B6100DB6004805050610850565B6040518082815260200191505060405180910390F35B6100FE60048050506103AF565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B61013760048050506103E7565B6040518082815260200191505060405180910390F35B61015A6004805050610389565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B610193600480505061048B565B6040518082815260200191505060405180910390F35B6101BF60048080359060200190919050506104A0565B6040518082815260200191505060405180910390F35B6101E260048050506103D5565B6040518082815260200191505060405180910390F35B61020560048050506103DE565B6040518082815260200191505060405180910390F35B61028A6004808035906020019091908035906020019091908035906020019091908035906020019082018035906020019191908080601F01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061056B565B6040518082815260200191505060405180910390F35B6102B66004808035906020019091905050610470565B6040518082815260200191505060405180910390F35B6102D960048050506103F0565B6040518082815260200191505060405180910390F35B6103056004808035906020019091905050610403565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B6103506004808035906020019091908035906020019091905050610445565B6040518082815260200191505060405180910390F35B6103736004805050610963565B6040518082815260200191505060405180910390F35B600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B600160009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B60026000505481565B60036000505481565B60046000505481565B600560009054906101000A900460FF1681565B600660005081815481101561000257906000526020600020900160005B9150909054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B6007600050602052816000526040600020600050602052806000526040600020600091509150505481565B60086000506020528060005260406000206000915090505481565B6000600660005080549050905061049D565B90565B60006000600960019054906101000A900460FF16156104C25760009150610565565B600090505B60066000508054905081101561055C57600660005081815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16141561054F5760019150610565565B80806001019150506104C7565B60009150610565565B50919050565B60006000610578846104A0565B15156105875760009150610847565B3090508373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF166323B872DD878388604051847C0100000000000000000000000000000000000000000000000000000000028152600401808473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200182815260200193505050506020604051808303816000876161DA5A03F115610002575050506040518051906020015015156106485760009150610847565B6000600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054141561070D5784600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005081905550610774565B84600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000828282505401925050819055505B84600860005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000828282505401925050819055508460036000828282505401925050819055507F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C8685876001604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A160019150610847565B50949350505050565B6000600460005054421015806108725750600560009054906101000A900460FF165B1561094957600260005054600360005054101515610920576001600960006101000A81548160FF021916908302179055507FEC3F991CAF7857D61663FD1BBA1739E04ABD4781238508CDE554BB849D790C85600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600360005054604051808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018281526020019250505060405180910390A15B60046000505442101515610948576001600960016101000A81548160FF021916908302179055505B5B600960019054906101000A900460FF169050610960565B90565B60006000600060006000610975610850565B15156109845760009450611042565B600960009054906101000A900460FF161515610CE1576000935083505B600660005080549050841015610CD857600660005084815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1692508250600073FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1614158015610A8857506000600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000505414155B15610CCB57600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054915081506000600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001908152602001600020600050819055506000821115610CCA578273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1663A9059CBB3384604051837C0100000000000000000000000000000000000000000000000000000000028152600401808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001828152602001925050506020604051808303816000876161DA5A03F115610002575050506040518051906020015015610C6A577F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C3384846000604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A1610CC9565B81600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001908152602001600020600050819055505B5B5B83806001019450506109A1565B60019450611042565B600960009054906101000A900460FF168015610D4A57503373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16145B1561103957600190506000935083505B60066000508054905084101561103057600073FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600660005085815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1614151561102357600660005084815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1692508250600860005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054915081508273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1663A9059CBB600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1684604051837C0100000000000000000000000000000000000000000000000000000000028152600401808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001828152602001925050506020604051808303816000876161DA5A03F11561000257505050604051805190602001501561101D577F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600660005086815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF166003600050546000604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A1600860005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060009055611022565B610002565B5B8380600101945050610D5A565B60019450611042565B60009450611042565B5050505090560000000000000000000000004BE9C281CFE741BDEFA68C26F4B48FC58D6180A700000000000000000000000000000000000000000000000000000000000003E8000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000AB16E684DEAF5473D0A0C6B4671E796F749704C9\",\"value\":1,\"gas\":2147482960},\"origin\":\"64D84C8BF6305C7F396C57ECB3DB18B8F51623F3\",\"tx_id\":\"AC39CA6AF9FD849DDF2BBF0AD5517844C01FE479\",\"return\":\"606060405236156100CC576000357C01000000000000000000000000000000000000000000000000000000009004806301CB3B20146100CE57806302D05D3F146100F157806329DCB0CF1461012A57806338AF3EED1461014D5780633962F82D146101865780637A2D5ADD146101A95780637A3A0E84146101D55780637B3E5E7B146101F85780638F4FFCB11461021B578063A0E2E5F6146102A0578063C5064CB0146102CC578063E4E0EF35146102EF578063F7888AEC14610331578063FD6B7EF814610366576100CC565B005B6100DB6004805050610850565B6040518082815260200191505060405180910390F35B6100FE60048050506103AF565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B61013760048050506103E7565B6040518082815260200191505060405180910390F35B61015A6004805050610389565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B610193600480505061048B565B6040518082815260200191505060405180910390F35B6101BF60048080359060200190919050506104A0565B6040518082815260200191505060405180910390F35B6101E260048050506103D5565B6040518082815260200191505060405180910390F35B61020560048050506103DE565B6040518082815260200191505060405180910390F35B61028A6004808035906020019091908035906020019091908035906020019091908035906020019082018035906020019191908080601F01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061056B565B6040518082815260200191505060405180910390F35B6102B66004808035906020019091905050610470565B6040518082815260200191505060405180910390F35B6102D960048050506103F0565B6040518082815260200191505060405180910390F35B6103056004808035906020019091905050610403565B604051808273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200191505060405180910390F35B6103506004808035906020019091908035906020019091905050610445565B6040518082815260200191505060405180910390F35B6103736004805050610963565B6040518082815260200191505060405180910390F35B600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B600160009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B60026000505481565B60036000505481565B60046000505481565B600560009054906101000A900460FF1681565B600660005081815481101561000257906000526020600020900160005B9150909054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681565B6007600050602052816000526040600020600050602052806000526040600020600091509150505481565B60086000506020528060005260406000206000915090505481565B6000600660005080549050905061049D565B90565B60006000600960019054906101000A900460FF16156104C25760009150610565565B600090505B60066000508054905081101561055C57600660005081815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16141561054F5760019150610565565B80806001019150506104C7565B60009150610565565B50919050565B60006000610578846104A0565B15156105875760009150610847565B3090508373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF166323B872DD878388604051847C0100000000000000000000000000000000000000000000000000000000028152600401808473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200182815260200193505050506020604051808303816000876161DA5A03F115610002575050506040518051906020015015156106485760009150610847565B6000600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054141561070D5784600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005081905550610774565B84600760005060008873FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000828282505401925050819055505B84600860005060008673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000828282505401925050819055508460036000828282505401925050819055507F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C8685876001604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A160019150610847565B50949350505050565B6000600460005054421015806108725750600560009054906101000A900460FF165B1561094957600260005054600360005054101515610920576001600960006101000A81548160FF021916908302179055507FEC3F991CAF7857D61663FD1BBA1739E04ABD4781238508CDE554BB849D790C85600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600360005054604051808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018281526020019250505060405180910390A15B60046000505442101515610948576001600960016101000A81548160FF021916908302179055505B5B600960019054906101000A900460FF169050610960565B90565B60006000600060006000610975610850565B15156109845760009450611042565B600960009054906101000A900460FF161515610CE1576000935083505B600660005080549050841015610CD857600660005084815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1692508250600073FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1614158015610A8857506000600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020019081526020016000206000505414155B15610CCB57600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054915081506000600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001908152602001600020600050819055506000821115610CCA578273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1663A9059CBB3384604051837C0100000000000000000000000000000000000000000000000000000000028152600401808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001828152602001925050506020604051808303816000876161DA5A03F115610002575050506040518051906020015015610C6A577F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C3384846000604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A1610CC9565B81600760005060003373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060008573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001908152602001600020600050819055505B5B5B83806001019450506109A1565B60019450611042565B600960009054906101000A900460FF168015610D4A57503373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16145B1561103957600190506000935083505B60066000508054905084101561103057600073FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600660005085815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1673FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1614151561102357600660005084815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1692508250600860005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005054915081508273FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1663A9059CBB600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1684604051837C0100000000000000000000000000000000000000000000000000000000028152600401808373FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF168152602001828152602001925050506020604051808303816000876161DA5A03F11561000257505050604051805190602001501561101D577F1FE43A085F5507370C77D08B78179E99076AD281426B5189351310BE1B72625C600060009054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16600660005086815481101561000257906000526020600020900160005B9054906101000A900473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF166003600050546000604051808573FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1681526020018473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200183815260200182815260200194505050505060405180910390A1600860005060008473FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF16815260200190815260200160002060005060009055611022565B610002565B5B8380600101945050610D5A565B60019450611042565B60009450611042565B505050509056\",\"exception\":\"\"},\"error\":null,\"id\":\"\",\"jsonrpc\":\"2.0\"}";
    private String deployErrorResult = "{\"result\":null,\"error\":{\"code\":-32603,\"message\":\"Error when transacting: Memory out of bounds\"},\"id\":\"\",\"jsonrpc\":\"2.0\"}";

    private DeployResponse deploySuccessResponse;
    private DeployResponse deployErrorResponse;

    private ErisRPCRequestEntity requestEntity;

    @Before
    public void setUp() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        deploySuccessResponse = mapper.readValue(deploySuccessResult, DeployResponse.class);
        deployErrorResponse = mapper.readValue(deployErrorResult, DeployResponse.class);

        unit = new ContractUnit();
        unit.setName(null);
        unit.setConstant(false);
        unit.setType(ContractUnitType.constructor);
        unit.setAnonymous(false);
        unit.setOutputs(null);
        unit.setInputs(new Variable[]{
                new Variable("ifSuccessfulSendTo", new Address()),
                new Variable("fundingGoalInTokens", new Uint()),
                new Variable("durationInMinutes", new Uint()),
                new Variable("onGoalReached", new Bool()),
                new Variable("addressOfTokensAccumulated", new Array<>(new Address())),
        });
        account = Mockito.mock(ErisAccountData.class);
        client = Mockito.mock(HTTPRPCClient.class);
        client2 = Mockito.mock(HTTPRPCClient.class);
        when(client.call(any())).thenReturn(deploySuccessResult);
        when(client2.call(any())).thenReturn(deployErrorResult);

        Map<String, Object> params = new HashMap<>();
        params.put("address", "");
        params.put("gas_limit", Integer.MAX_VALUE);
        params.put("priv_key", null);
        params.put("data", "60606040526000600960006101000a81548160ff021916908302179055506000600960016101000a81548160ff0219169083021790555060405161132f38038061132f833981016040528080519060200190919080519060200190919080519060200190919080519060200190919080518201919060200150505b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555084600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555083600260005081905550603c8302420160046000508190555081600560006101000a81548160ff0219169083021790555061010a8161011f565b505b5050505050611049806102e66000396000f35b600060006000600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141580156101d15750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614155b156101df57600092506102df565b600091505b83518210156102d757838281518110156100025790602001906020020151905060066000508054806001018281815481835581811511610256578183600052602060002091820191016102559190610237565b808211156102515760008181506000905550600101610237565b5090565b5b5050509190906000526020600020900160005b83909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690830217905550506000600860005060008373ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000508190555081806001019250506101e4565b8192506102df565b505091905056606060405236156100cc576000357c01000000000000000000000000000000000000000000000000000000009004806301cb3b20146100ce57806302d05d3f146100f157806329dcb0cf1461012a57806338af3eed1461014d5780633962f82d146101865780637a2d5add146101a95780637a3a0e84146101d55780637b3e5e7b146101f85780638f4ffcb11461021b578063a0e2e5f6146102a0578063c5064cb0146102cc578063e4e0ef35146102ef578063f7888aec14610331578063fd6b7ef814610366576100cc565b005b6100db6004805050610850565b6040518082815260200191505060405180910390f35b6100fe60048050506103af565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61013760048050506103e7565b6040518082815260200191505060405180910390f35b61015a6004805050610389565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610193600480505061048b565b6040518082815260200191505060405180910390f35b6101bf60048080359060200190919050506104a0565b6040518082815260200191505060405180910390f35b6101e260048050506103d5565b6040518082815260200191505060405180910390f35b61020560048050506103de565b6040518082815260200191505060405180910390f35b61028a6004808035906020019091908035906020019091908035906020019091908035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061056b565b6040518082815260200191505060405180910390f35b6102b66004808035906020019091905050610470565b6040518082815260200191505060405180910390f35b6102d960048050506103f0565b6040518082815260200191505060405180910390f35b6103056004808035906020019091905050610403565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6103506004808035906020019091908035906020019091905050610445565b6040518082815260200191505060405180910390f35b6103736004805050610963565b6040518082815260200191505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60026000505481565b60036000505481565b60046000505481565b600560009054906101000a900460ff1681565b600660005081815481101561000257906000526020600020900160005b9150909054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6007600050602052816000526040600020600050602052806000526040600020600091509150505481565b60086000506020528060005260406000206000915090505481565b6000600660005080549050905061049d565b90565b60006000600960019054906101000a900460ff16156104c25760009150610565565b600090505b60066000508054905081101561055c57600660005081815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561054f5760019150610565565b80806001019150506104c7565b60009150610565565b50919050565b60006000610578846104a0565b15156105875760009150610847565b3090508373ffffffffffffffffffffffffffffffffffffffff166323b872dd878388604051847c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200193505050506020604051808303816000876161da5a03f115610002575050506040518051906020015015156106485760009150610847565b6000600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054141561070d5784600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005081905550610774565b84600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055505b84600860005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055508460036000828282505401925050819055507f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c8685876001604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a160019150610847565b50949350505050565b6000600460005054421015806108725750600560009054906101000a900460ff165b1561094957600260005054600360005054101515610920576001600960006101000a81548160ff021916908302179055507fec3f991caf7857d61663fd1bba1739e04abd4781238508cde554bb849d790c85600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600360005054604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a15b60046000505442101515610948576001600960016101000a81548160ff021916908302179055505b5b600960019054906101000a900460ff169050610960565b90565b60006000600060006000610975610850565b15156109845760009450611042565b600960009054906101000a900460ff161515610ce1576000935083505b600660005080549050841015610cd857600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015610a8857506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000505414155b15610ccb57600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055506000821115610cca578273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb3384604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001925050506020604051808303816000876161da5a03f115610002575050506040518051906020015015610c6a577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c3384846000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a1610cc9565b81600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055505b5b5b83806001019450506109a1565b60019450611042565b600960009054906101000a900460ff168015610d4a57503373ffffffffffffffffffffffffffffffffffffffff16600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1561103957600190506000935083505b60066000508054905084101561103057600073ffffffffffffffffffffffffffffffffffffffff16600660005085815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561102357600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600860005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081508273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001925050506020604051808303816000876161da5a03f11561000257505050604051805190602001501561101d577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600660005086815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff166003600050546000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff16815260200183815260200182815260200194505050505060405180910390a1600860005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060009055611022565b610002565b5b8380600101945050610d5a565b60019450611042565b60009450611042565b5050505090560000000000000000000000004BE9C281CFE741BDEFA68C26F4B48FC58D6180A700000000000000000000000000000000000000000000000000000000000003E8000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000AB16E684DEAF5473D0A0C6B4671E796F749704C9");
        requestEntity = new ErisRPCRequestEntity(params,"erisdb.transactAndHold");
    }


    @Test
    public void deploySuccessTest() throws IOException {
        deployer = new ContractDeployer(client, account);
        assertEquals(deploySuccessResponse, deployer.deploy(unit, solidityByteCode, "4BE9C281CFE741BDEFA68C26F4B48FC58D6180A7",
                BigInteger.valueOf(1000),
                BigInteger.valueOf(10),
                true,
                new ArrayList<String>() {{
                    add("AB16E684DEAF5473D0A0C6B4671E796F749704C9");
                }}));
    }

    @Test(expected = ContractDeploymentException.class)
    public void deployErrorTest() throws IOException {
        deployer = new ContractDeployer(client2, account);
        assertEquals(deployErrorResponse, deployer.deploy(unit, solidityByteCode, "4BE9C281CFE741BDEFA68C26F4B48FC58D6180A7",
                BigInteger.valueOf(1000),
                BigInteger.valueOf(10),
                true,
                new ArrayList<String>() {{
                    add("AB16E684DEAF5473D0A0C6B4671E796F749704C9");
                }}));
    }

    @Test
    public void deployParametersTest() throws IOException {
        deployer = new ContractDeployer(client, account);
        deployer.deploy(unit, solidityByteCode, "4BE9C281CFE741BDEFA68C26F4B48FC58D6180A7",
                BigInteger.valueOf(1000),
                BigInteger.valueOf(10),
                true,
                new ArrayList<String>() {{
                    add("AB16E684DEAF5473D0A0C6B4671E796F749704C9");
                }});
        verify(client).call(requestEntity);
    }

}
